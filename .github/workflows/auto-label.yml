name: Auto label issues

on:
    issues:
        types: [opened]

jobs:
    label:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/github-script@v7
              with:
                  script: |
                      const assoc = context.payload.issue.author_association
                      const labels = assoc === "OWNER" || assoc === "MEMBER" || assoc === "COLLABORATOR"
                        ? ["internal"]
                        : ["external"]

                      await github.rest.issues.addLabels({
                        owner: context.repo.owner,
                        repo: context.repo.repo,
                        issue_number: context.payload.issue.number,
                        labels
                      })
