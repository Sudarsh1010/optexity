---
title: One Password Integration
description: Using One Password to store and retrieve secrets in your automations
---

Optexity can use One Password to store and retrieve secrets in your automations. This is useful for storing sensitive information like passwords, API keys, and other secrets. Using one password instead of hardcoding secrets in your automations is more secure and easier to manage.

## How to use One Password in your automations

Migration from hardcoded secrets to One Password is easy. You move the parameters from the `input_parameters` and `generated_parameters` dictionaries to the `secure_parameters` dictionary. Move only the parameters that are stored in One Password.

Initial state:
```json
"input_parameters": {
  "password": ["password_value"],
  "username": ["username_value"]
}
"generated_parameters": {}
"secure_parameters": {}
```

Final state:

```json
"input_parameters": {}
"generated_parameters": {}
"secure_parameters": {
  "password": [
    {
      "onepassword": {
        "type": "raw",
        "item_name": "item_name_in_one_password",
        "field_name": "password_field_name",
        "vault_name": "vault_name_in_one_password"
      },
    }
  ],
  "username": [
    {
      "onepassword": {
        "type": "raw",
        "item_name": "item_name_in_one_password",
        "field_name": "username_field_name",
        "vault_name": "vault_name_in_one_password"
      },
    }
  ]
}
```

## Understanding the One Password parameter

The One Password parameter is a dictionary that contains the following keys:

- `type`: The type of the parameter. Possible values are `raw` and `totp_secret`. `raw` is used when direct value from one password is needed liek username and password. `totp_secret` is used when the value stored in one password is a TOTP secret and you need to generate a TOTP code from it. You can learn more about TOTP in the [TOTP Integration](/docs/advanced/totp-integration) documentation.

- `field_name`: The name of the field in the item. This is the name of the field needs to be retrieved from the item.
- `item_name`: The name of the item in One Password. This is the name of the item needs to be retrieved from the vault.
- `vault_name`: The name of the vault in One Password. This is the name of the vault that contains the item.

## Retriving one password token

You need to set the `OP_SERVICE_ACCOUNT_TOKEN` environment variable obtained from the One Password admin page https://my.1password.com/home. Add this to your `.env` file.

```env
OP_SERVICE_ACCOUNT_TOKEN=your_service_account_token
```

Refer to the video for more details on how to get the service account token.

<iframe
  width="100%"
  height="400"
  src="https://www.youtube.com/embed/q51r3idYtxo"
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowfullscreen
/>

## Revoking the service account token

You can revoke the service account token from the One Password dashboard anytime.